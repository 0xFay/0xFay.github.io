# python端口扫描器

>之前学socket也主要是为了这个，废话不多说直接放脚本

```
import socket
import threading
import time
import linecache
import re

url=input("输入需要扫描的网址>>:")

try:
    ip=socket.gethostbyname(url)
    print("扫描网址的ip地址是:",ip)
    print(socket.gethostbyaddr(url))
except:
    print("输入地址有误，无法查到ip地址")

#打开端口大全读取常用端口
print('总共扫描端口数：')
print(len(open('D:/script/portnum.txt','r').readlines()))
print('-----------------------分割线-----------------------')

def getport(num):
    port=linecache.getline('D:/script/portnum.txt',num)
    return port
    

#和端口套接字进行连接，失败则表示端口未开放
def portscanner(ip,port):
    target=(ip,port)
    try:    
        scan=socket.socket()
        scan.connect(target)
        recv=scan.recv(1024)
        print(port)
        print("端口开放,以下为反馈信息：")
        print(recv.decode('utf-8'))
        scan.close()
    except:
        print(port)
        print("端口未开放")

for i in range(1,len(open('D:/script/portnum.txt','r').readlines())):
    listtostr=re.findall(r"\d+",getport(i))
    print(listtostr)
    scanningport=int(''.join(str(s) for s in listtostr))
    portscanner(ip,scanningport)
    print("-----------------------分割线-----------------------")

```
并不完善，没有加多线程，只能一个一个跑，速度非常慢，后续的完善计划是添加多线程，并且在扫出开放端口后能自主查询该端口的作用之类的

思路简单，创建套接字去连接端口就可，不开放就会连接失败，开放就连接成功，网上搜一个端口大全保存到本地，扫的时候去读文件里的端口一个一个扫就行了。